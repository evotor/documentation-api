version: 1.0.9
title: API Эвотор
description: |
   # О REST API Эвотор
   Пользователи платформы Эвотор могут расширить базовую функциональность смарт-терминала с помощью интеграции со сторонними сервисами. Для пользователя, интеграция происходит с помощью приложений, доступных в Магазине Эвотор.

   После интеграции, сторонние сервисы могут взаимодействовать с данными пользователей платформы с помощью HTTP-запросов. Обратите внимание, что добавление в тело запросов, которые передаёт облако, может происходить в любой момент. Изменение или удаление полей происходит после предварительного уведомления.
   Кроме обращений к REST API облака, сторонние сервисы могут подписаться на вебхуки облака Эвотор.
   > С 1.06.2016 при работе с /api/v1/inventories/* Эвотор не будет передавать пустые необязательные (не отмеченные как Required) поля.

   ## Вебхуки
   Вебхуки - события, которые рассылает облако Эвотор на заданные адреса. Чтобы подписать сторонний сервис на вебхуки облака Эвотор, при создании приложения, на вкладке **Интеграция** требуется указать соответствующие веб-адреса.

   Облако Эвотор поддерживает два вида вебхуков:

     * Уведомления. Облако гарантирует доставку вебхуков этого типа, но не требует подтверждения действия от стороннего сервиса.
     * Запросы. Облако гарантирует доставку вебхуков этого типа и ожидает подтверждения действия от стороннего сервиса. Например, при регистрации новой или авторизации существующей учётной записи.

   # Авторизация
   Запросы стороннего сервера к REST API, облако Эвотор авторизует с помощью **токена приложения**. Вебхуки облака сторонний сервис авторизует с помощью **токена стороннего сервиса** и **токена пользователя**.

   ## Токен приложения
   Облако присваивает токен приложения каждому установленному приложению и с его помощью определяет в рамках какого пользователя действуют запросы стороннего сервиса. При запросе к REST API Облака Эвотор, например, для получения списка товаров или магазинов пользователя, сторонний сервис передаёт *токен приложения* в заголовке `X-Authorization`.

   Информацию о том, как получить токен приложения, [смотрите в документации](https://developer.evotor.ru/docs/doc_authorization.html).

   ## Токен стороннего сервиса
   *Токен стороннего сервиса* необходим для авторизации вебхуков-запросов. В зависимости от способа авторизации, вебхуки-запросы к стороннему сервису содержат заголовок `Authorization` с типом `Basic` или `Bearer`:

     * Если сторонний сервис поддерживает авторизацию с типом `Basic`, в Эвотор требуется предоставить имя пользователя и пароль в формате `username:password`. Вы можете сделать это на вкладке **Интеграция** вашего приложения, на сайте [dev.evotor.ru](https://dev.evotor.ru).

     * Если сторонний сервис поддерживает авторизацию с типом `Bearer`, в Эвотор требуется предоставить токен в формате `string`. Вы можете сделать это на вкладке **Интеграция** вашего приложения, на сайте [dev.evotor.ru](https://dev.evotor.ru).

   В ответ на вебхуки [**[POST] Авторизация пользователя**](https://api.evotor.ru/docs/#tag/Vebhuki-zaprosy%2Fpaths%2F~1partner.ru~1api~1v1~1user~1verify%2Fpost), [**[POST] Регистрация учётной записи**](https://api.evotor.ru/docs/#tag/Vebhuki-zaprosy%2Fpaths%2F~1partner.ru~1api~1v1~1user~1create%2Fpost) и [**[POST] Активация / деактивация тарифа**](https://api.evotor.ru/docs/#tag/Vebhuki-zaprosy%2Fpaths%2F~1partner.ru~1api~1v1~1user~1tariff%2Fpost), сторонний сервис сообщает облаку Эвотор *токен пользователя*, который необходим, чтобы авторизовать все остальные вебхуки Эвотора.

   Сторонний веб-сервис также может обращаться в облако Эвотор за дополнительной информацией. Токен для авторизации таких запросов Эвотор передаёт в вебхуке  [**[POST] Передача токена приложения**](https://api.evotor.ru/docs/#tag/Vebhuki-zaprosy%2Fpaths%2F~1partner.ru~1api~1v1~1user~1token%2Fpost).

   # Ограничения

   С сентября 2017 вводятся ограничения запросов к REST API Облака Эвотор.

   Максимальный объём данных в запросе к Облаку Эвотор не может превышть 10 МБайт.

   Ко всем ответам 200 OK от Облака Эвотор будут добавлены следующие заголовки:

     * `X-RateLimit-Limit` – Максимальное количество запросов, которые вы можете сделать в текущем временном интервале.
     * `X-RateLimit-Remaining` – Количество запросов, оставшихся в текущем временном интервале.
     * `X-RateLimit-Reset` – Время, в секундах, оставшееся до начала нового временного интервала.
